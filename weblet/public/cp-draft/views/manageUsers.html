<div class="container">

  <div class="btn-group">
    <button class="btn btn-primary" ng-click="showAddUserFragment()"><i class="fa fa-user-plus fa-fw"></i> Add new</button>
    <button class="btn" ng-click="loadUsers(true)"><i class="fa fa-refresh fa-fw {{loadUsersSpin ? 'fa-spin' : ''}}"></i> Refresh</button>
  </div>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Roles</th>
        <th></th>
      </tr>
    </thead>
    <tbody>

      <tr ng-repeat="user in managedUsers">
        <td>{{user.username}}</td>
        <td>{{user.email}}</td>
        <td>{{user.roles | csvArray}}</td>
        <td><a href data-toggle="tooltip" title="Click to edit the profile" ng-click="showEditUserFragment(user.id)"><i class="fa fa-pencil"></i></a></td>
      </tr>

    </tbody>
  </table>

</div>

<!-- Edit (add) user dialog -->
<div class="modal fade" id="manage-users-edit-dialog" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{dialogOptions.title}}</h4>
      </div>

      <div class="modal-body">
        <form class="form-horizontal">
          <fieldset>
            <div class="form-group">
              <label class="control-label col-sm-3">Username</label>
              <div class="col-sm-9">
                <input class="form-control" type="text" ng-model="editedUser.username" />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3">Email</label>
              <div class="col-sm-9">
                <input class="form-control" type="email" ng-model="editedUser.email" />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3">Password</label>
              <div class="col-sm-9">
                <input class="form-control" type="password" ng-model="editedUser.password" />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3">Roles</label>
              <div class="col-sm-9">
                <div class="checkbox" ng-repeat="(role,enabled) in editedUser.roles">
                  <label><input type="checkbox" ng-model="editedUser.roles[role]"/> {{role}}</label>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3">Attributes</label>
              <div class="col-sm-9">
                <textarea class="form-control" ng-model="editedUser.attributes"></textarea>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-3">Metadata</label>
              <div class="col-sm-9">
                <textarea class="form-control" ng-model="editedUser.metadata"></textarea>
              </div>
            </div>
          </fieldset>
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger pull-left" data-dismiss="modal" ng-click="dialogOptions.onDelete()" ng-show="dialogOptions.onDelete"><i class="fa fa-user-times fa-fw"></i> Delete</button>
        <button class="btn btn-warning pull-left" data-dismiss="modal" ng-click="dialogOptions.onSignOut()" ng-show="dialogOptions.onSignOut"><i class="fa fa-sign-out fa-fw"></i> Sign out</button>
        <button class="btn btn-success" data-dismiss="modal" ng-click="dialogOptions.onSubmit()"><i class="fa fa-check fa-fw"></i> Submit</button>
        <button class="btn" data-dismiss="modal"><i class="fa fa-ban fa-fw"></i> Close</button>
      </div>

    </div>
  </div>
</div>
